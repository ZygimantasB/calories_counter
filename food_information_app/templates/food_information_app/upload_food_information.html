{% extends 'base.html' %}
{% load static %}

{% block css_files %}
  <link rel="stylesheet" href="{% static 'food_information_app/upload_food_information.css' %}">
{% endblock %}

{% block title %} Upload Food Information {% endblock %}

{% block content %}

  <div id="upload-food-information">
      <h3><b>Upload food information to the database from csv file</b></h3>
      <form action="" method="post" enctype="multipart/form-data">
        {% csrf_token %}
        {{ form.file }}
        <br>
        {% if form.file.errors %}
        <div class="alert alert-danger">
          {{ form.file.errors }}
        </div>
        {% endif %}
        <button class="btn btn-primary food_add_button" type="submit">Upload</button>
      </form>
  </div>
  <div  class="count__information">
    <h3><b>Information from database</b></h3>
    <p>Number of registered users: {{ count_users }}</p>
    <p>Number of information about products: {{ count_products }}</p>
    <p>Number of information about meals: {{ count_meal }}</p>
    <p>Number of information about eaten foods: {{ count_food }}</p>
    <p>Number of information about name and surname: {{ count_user_information }}</p>
    <p>Number of information about tags: {{ count_tag }}</p>
    <p>Number of information posts: {{ count_post }}</p>
    <p>Number of information about comments: {{ count_comment }}</p>
    <p>Number of information about authors: {{ count_author }}</p>
  </div>

    <div class="product__information">
        <h3>Most common products</h3>
        <table class="table table-dark table-striped">
          <thead>
          <tr>
            <th scope="col">#</th>
            <th scope="col">Food name</th>
            <th scope="col">Count</th>
          </tr>
          </thead>
        <tbody>
        {% for rank, product in top_10_products %}
          <tr>
            <th>{{ rank }}.</th>
            <th>{{ product.name }}</th>
            <th>{{ product.usage_count }}</th>
          </tr>
        {% endfor %}
        </tbody>
        </table>

    </div>

{% endblock %}
